import{a as J,b as K}from"./chunk-MKNPHXWM.js";import{d as U,e as z,g as X}from"./chunk-FMILLHP6.js";import{a as j,f as O,l as h}from"./chunk-Y6Z3Q5YN.js";import{Ab as S,F as x,Kb as f,Na as Q,Sb as w,Y as F,Ya as _,Z as H,Za as k,bb as P,ca as o,g as R,h as b,ka as $,la as B,mb as q,n as v,ob as N,sb as y,tb as c,yb as G,zb as V}from"./chunk-2WHKZRHE.js";var s={entityTemplate:"data/templates/persistence/TargetEntity.cs",entityConfigTemplate:"data/templates/persistence/TargetEntityConfig.cs",irepositoryTemplate:"data/templates/persistence/ITargetRepository.cs",repositoryTemplate:"data/templates/persistence/TargetRepository.cs",modelTemplate:"data/templates/domain/TargetModel.cs",dtoTemplate:"data/templates/application/dto/TargetDTO.cs",dtoValidatorTemplate:"data/templates/application/dto/TargetDTOValidator.cs",mapperTemplate:"data/templates/domain/TargetMapper.cs",allQueryTemplate:"data/templates/application/cqrs-queries/GetAllTargets/GetAllTargetsQuery.cs",allQueryHandlerTemplate:"data/templates/application/cqrs-queries/GetAllTargets/GetAllTargetsQueryHandler.cs",allResponseTemplate:"data/templates/application/cqrs-queries/GetAllTargets/AllTargetsResponse.cs",getByIdQueryTemplate:"data/templates/application/cqrs-queries/GetTargetById/GetTargetByIdQuery.cs",getByIdQueryHandlerTemplate:"data/templates/application/cqrs-queries/GetTargetById/GetTargetByIdQueryHandler.cs",getResponseTemplate:"data/templates/application/cqrs-queries/GetTargetById/TargetResponse.cs",createCommandTemplate:"data/templates/application/cqrs-commands/CreateTarget/CreateTargetCommand.cs",createCommandHandlerTemplate:"data/templates/application/cqrs-commands/CreateTarget/CreateTargetCommandHandler.cs",deleteCommandTemplate:"data/templates/application/cqrs-commands/DeleteTarget/DeleteTargetCommand.cs",deleteCommandHandlerTemplate:"data/templates/application/cqrs-commands/DeleteTarget/DeleteTargetCommandHandler.cs",updateCommandTemplate:"data/templates/application/cqrs-commands/UpdateTarget/UpdateTargetCommand.cs",updateCommandHandlerTemplate:"data/templates/application/cqrs-commands/UpdateTarget/UpdateTargetCommandHandler.cs",controllerTemplate:"data/templates/application/TargetsController.cs",dependenciesTemplate:"data/templates/configuration/AddDependencies.txt",mediatorTemplate:"data/templates/configuration/AddMediatR.txt"};function T(){return{entityTemplate:"",entityConfigTemplate:"",irepositoryTemplate:"",repositoryTemplate:"",modelTemplate:"",dtoTemplate:"",dtoValidatorTemplate:"",mapperTemplate:"",allQueryTemplate:"",allQueryHandlerTemplate:"",allResponseTemplate:"",getByIdQueryTemplate:"",getByIdQueryHandlerTemplate:"",getResponseTemplate:"",createCommandTemplate:"",createCommandHandlerTemplate:"",deleteCommandTemplate:"",deleteCommandHandlerTemplate:"",updateCommandTemplate:"",updateCommandHandlerTemplate:"",controllerTemplate:"",dependenciesTemplate:"",mediatorTemplate:""}}function L(r){var e="";let l;for(l in s)e+=`------------------------------------------------------------------------------------------------------------------------------------\r
`,e+=r[l]+`\r
\r
`;return e}var t={EntitySimpleName:"${EntitySimpleName}",EntityPluralName:"${EntityPluralName}",EntityID:"${EntityID}",EntityTypeID:"${EntityTypeID}",ContextClassName:"${ContextClassName}",PropertyName:"${PropertyName}",PropertyType:"${PropertyType}",PropertyMethods:"${PropertyMethods}",PropertyDefinitions:"${Properties}",PropertiesConfiguration:"${PropertiesConfiguration}",ModelPropertiesMapping:"${ModelPropertiesMapping}",EntityPropertiesMapping:"${EntityPropertiesMapping}",DTOPropertiesMapping:"${DTOPropertiesMapping}",PropertiesValidationRules:"${PropertiesValidationRules}"},m={PropertyDefinition:"    public ${PropertyType} ${PropertyName} ${PropertyMethods}",PropertyConfig:"        builder.Property(x => x.${PropertyName});",ModelPropertyMapping:"             ${PropertyName} = model.${PropertyName}",DTOPropertyMapping:"           ${PropertyName} = dto.${PropertyName}",EntityPropertyMapping:"            ${PropertyName} = entity.${PropertyName}",ValidationRule:"       RuleFor(x => x.${PropertyName});",Collection:"Collection<${PropertyType}>"};var g=class r{httpClient=o(j);isBusySubject=new v(!0);templates=T();constructor(){this.loadTemplates()}loadTemplates(){this.templates=T();let e,l=Object.keys(s),i=[];for(e in s)i.push(this.httpClient.get(s[e],{responseType:"text"}));x(i).subscribe(a=>{for(let n=0;n<l.length;++n)this.templates[l[n]]=a[n];this.isBusySubject.next(!1)})}generateCodeFromConfiguration(e){return new Promise((l,i)=>R(this,null,function*(){let a=T(),n=e.properties.find(p=>p.isPrimaryKey),d="",A="",E="",D="",I="",M="";var Z=e.properties.length-1;for(let p=0;p<e.properties.length;++p){var ee=e.properties[p].isCollection?m.Collection.replaceAll(t.PropertyType,e.properties[p].type):e.properties[p].type;d+=m.PropertyDefinition.replaceAll(t.PropertyType,ee).replaceAll(t.PropertyName,e.properties[p].name).replaceAll(t.PropertyMethods,e.properties[p].propertyMethods)+`\r
`,A+=m.PropertyConfig.replaceAll(t.PropertyName,e.properties[p].name)+`\r
`,E+=m.ValidationRule.replaceAll(t.PropertyName,e.properties[p].name)+`\r
`;var C=(p==Z?"":",")+`\r
`;M+=m.EntityPropertyMapping.replaceAll(t.PropertyName,e.properties[p].name)+C,I+=m.DTOPropertyMapping.replaceAll(t.PropertyName,e.properties[p].name)+C,D+=m.ModelPropertyMapping.replaceAll(t.PropertyName,e.properties[p].name)+C}a.entityTemplate=this.templates.entityTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.PropertyDefinitions,d),a.entityConfigTemplate=this.templates.entityConfigTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.EntityPluralName,e.entityPluralName).replaceAll(t.EntityID,n?.name??"").replaceAll(t.PropertiesConfiguration,A),a.irepositoryTemplate=this.templates.irepositoryTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.EntityTypeID,n?.type??""),a.repositoryTemplate=this.templates.repositoryTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.ContextClassName,e.contextClassName).replaceAll(t.EntityID,n?.name??"").replaceAll(t.EntityTypeID,n?.type??""),a.modelTemplate=this.templates.modelTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.PropertyDefinitions,d),a.dtoTemplate=this.templates.dtoTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.PropertyDefinitions,d),a.dtoValidatorTemplate=this.templates.dtoValidatorTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.PropertiesValidationRules,E),a.mapperTemplate=this.templates.mapperTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.ModelPropertiesMapping,D).replaceAll(t.DTOPropertiesMapping,I).replaceAll(t.EntityPropertiesMapping,M),a.mediatorTemplate=this.templates.mediatorTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.EntityPluralName,e.entityPluralName),a.dependenciesTemplate=this.templates.dependenciesTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName),a.getResponseTemplate=this.templates.getResponseTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName),a.getByIdQueryTemplate=this.templates.getByIdQueryTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.EntityTypeID,n?.type??""),a.getByIdQueryHandlerTemplate=this.templates.getByIdQueryHandlerTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName),a.allResponseTemplate=this.templates.allResponseTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.EntityPluralName,e.entityPluralName),a.allQueryTemplate=this.templates.allQueryTemplate.replaceAll(t.EntityPluralName,e.entityPluralName),a.allQueryHandlerTemplate=this.templates.allQueryHandlerTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.EntityPluralName,e.entityPluralName),a.createCommandTemplate=this.templates.createCommandTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName),a.createCommandHandlerTemplate=this.templates.createCommandHandlerTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName),a.deleteCommandTemplate=this.templates.deleteCommandTemplate.replaceAll(t.EntityTypeID,n?.type??"").replaceAll(t.EntitySimpleName,e.entitySingularName),a.deleteCommandHandlerTemplate=this.templates.deleteCommandHandlerTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName),a.updateCommandTemplate=this.templates.updateCommandTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName),a.updateCommandHandlerTemplate=this.templates.updateCommandHandlerTemplate.replaceAll(t.EntityID,n?.name??"").replaceAll(t.EntitySimpleName,e.entitySingularName),a.controllerTemplate=this.templates.controllerTemplate.replaceAll(t.EntitySimpleName,e.entitySingularName).replaceAll(t.EntityPluralName,e.entityPluralName).replaceAll(t.EntityTypeID,n?.type??""),l(a)}))}subscribeToBusyState(){return this.isBusySubject}static \u0275fac=function(l){return new(l||r)};static \u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"})};var te=()=>({fontSize:"3rem",color:"green"});function ae(r,e){r&1&&(y(0,"div"),f(1,"Please wait... generating Code"),c())}function le(r,e){if(r&1){let l=G();y(0,"div")(1,"div",0)(2,"div",1)(3,"div"),f(4,"Visualization coming soon...."),c()()()(),y(5,"div",0)(6,"div",1)(7,"p-button",2),V("onClick",function(){$(l);let a=S(2);return B(a.downloadAsTxtFile())}),c()()()}r&2&&(Q(3),q(w(2,te)))}function re(r,e){if(r&1&&P(0,ae,2,0,"div")(1,le,8,3),r&2){let l=S();N(l.isGenerating?0:1)}}var u=class r{isGenerating=!0;configurationId="";configuration;generatedCode;storageService=o(X);router=o(O);codeGeneratorService=o(g);busyStateSubscription=new b;constructor(){this.configuration=void 0}set resultId(e){this.configurationId=e,this.configuration=this.storageService.getConfiguration(e),this.configuration||this.router.navigate([""]),this.isGenerating=!0,this.busyStateSubscription=this.codeGeneratorService.subscribeToBusyState().subscribe(l=>{l||this.codeGeneratorService.generateCodeFromConfiguration(this.configuration).then(i=>{this.generatedCode=i,this.isGenerating=!1})})}downloadAsTxtFile(){var e=L(this.generatedCode),l=`dotnet-codegen-${this.configuration?.entitySingularName}-${this.formatDateForFile(this.configuration?.createdAt??"")}.txt`,i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),i.setAttribute("download",l),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}OnDestroy(){this.busyStateSubscription.unsubscribe()}ngOnInit(){}formatDate(e){return J(e)}formatDateForFile(e){return K(e)}static \u0275fac=function(l){return new(l||r)};static \u0275cmp=_({type:r,selectors:[["app-result-page"]],inputs:{resultId:"resultId"},decls:1,vars:1,consts:[[1,"col-12"],[1,"flex","justify-content-center"],["label","Download generated code as a Text File","icon",`pi pi-download
                `,"iconPos","left",3,"onClick"]],template:function(l,i){l&1&&P(0,re,2,1),l&2&&N(i.configuration!==void 0?0:-1)},dependencies:[z,U],encapsulation:2})};var ie=[{path:"",component:u}],Y=class r{static \u0275fac=function(l){return new(l||r)};static \u0275mod=k({type:r});static \u0275inj=H({imports:[h.forChild(ie),h]})};export{Y as ResultRoutingModule};
